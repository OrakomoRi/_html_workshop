<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Classwork 3</title>
	<meta name="author" content="OrakomoRi">
	<link rel="icon" href="https://i.imgur.com/wIbsb0z.png">
</head>

<body>
	<iframe width="480px" height="295px" src="https://www.youtube.com/embed/1Psjws97FoA?autoplay=1" title="YouTube video player" id="YouTube_video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
	<br>

	<button id="geolocation_button">Geolocation of me</button>
	<p id="geolocation"></p>
	<br>

	<div class="contact_form">
		<form id="contact" action="https://www.w3schools.com/action_page.php" target="_blank">
			<h2>Contact me</h2>
			<label for="nickname">Nickname:</label>
			<input type="text" name="nickname" placeholder="Your nickname..." required>
			<br>
			<label for="email">Email:</label>
			<input type="email" name="email" placeholder="Your email..." required>
			<br>
			<p>Rate my service:</p>
			<input type="radio" name="service_feedback" value="Poor" required>Poor
			<input type="radio" name="service_feedback" value="Normal">Normal
			<input type="radio" name="service_feedback" value="Good">Good
			<input type="radio" name="service_feedback" value="Godlike">Godlike
			<br>
			<p>What mark?</p>
			<select name="mark" required>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
				<option value="9">9</option>
				<option value="10">10</option>
			</select>
			<br>
			<p>Text feedback</p>
			<textarea name="message" placeholder="You may type any message to me..."></textarea>
			<br>
			<button type="submit" id="submit_button">Submit</button>
		</form>
	</div>

	<script>
		let source = document.querySelector('#YouTube_video').src.match(/(?<=embed\/).+(?=\?)/);
		if (source != null) {
			fetch (`https://www.googleapis.com/youtube/v3/videos?id=${source[0]}&key=AIzaSyBDzEzQUybCrVAULPSqFktGnoBUrK--DSg&part=snippet`).then((res) => {
				return res.json();
			}).then((e) => {
				document.head.querySelector('title').innerText = e.items[0].snippet.title;
			})
		}

		function display_location(message) {
			document.querySelector('#geolocation').textContent = message;
		}

		document.querySelector('#geolocation_button').addEventListener('click', () => {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition((position) => {
					display_location(`Latitude: ${position.coords.latitude}, longitude: ${position.coords.longitude}`);
				});
			}
			else {
				display_location('Cannot display the geolocation.');
			}
		});
	</script>
</body>
</html>